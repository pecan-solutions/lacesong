<Window x:Class="Lacesong.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:Lacesong.WPF.ViewModels"
        xmlns:views="clr-namespace:Lacesong.WPF.Views"
        mc:Ignorable="d"
        Title="Lacesong - Mod Manager" 
        Height="700" 
        Width="1000"
        MinHeight="500"
        MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource BackgroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource HeaderBrush}" Padding="16,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Lacesong" FontSize="20" FontWeight="SemiBold" VerticalAlignment="Center" 
                               Foreground="{DynamicResource PrimaryTextBrush}"/>
                    <TextBlock Text="Mod Manager" FontSize="14" VerticalAlignment="Center" Margin="8,0,0,0"
                               Foreground="{DynamicResource SecondaryTextBrush}"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Logs" Command="{Binding OpenLogsCommand}" 
                            Style="{DynamicResource HeaderButtonStyle}" Margin="0,0,8,0"/>
                    <Button Content="Settings" Command="{Binding OpenSettingsCommand}" 
                            Style="{DynamicResource HeaderButtonStyle}" Margin="0,0,8,0"/>
                    <Button Content="Exit" Command="{Binding ExitApplicationCommand}" 
                            Style="{DynamicResource HeaderButtonStyle}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Navigation Sidebar -->
            <Border Grid.Column="0" Background="{DynamicResource SidebarBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,1,0">
                <StackPanel Margin="16,16,0,16">
                    <TextBlock Text="Navigation" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,16" 
                               Foreground="{DynamicResource PrimaryTextBrush}"/>
                    
                    <Button Content="Home" Command="{Binding NavigateToViewCommand}" 
                            CommandParameter="Home" Style="{DynamicResource NavButtonStyle}" Margin="0,0,0,8"/>
                    
                    <Button Content="Game Detection" Command="{Binding NavigateToViewCommand}" 
                            CommandParameter="GameDetection" Style="{DynamicResource NavButtonStyle}" Margin="0,0,0,8"/>
                    
                    <Button Content="Mod Loader" Command="{Binding NavigateToViewCommand}" 
                            CommandParameter="BepInExInstall" Style="{DynamicResource NavButtonStyle}" Margin="0,0,0,8"/>
                    
                    <Button Content="Mods" Command="{Binding NavigateToViewCommand}" 
                            CommandParameter="ModCatalog" Style="{DynamicResource NavButtonStyle}" Margin="0,0,0,16"/>
                    
                    <Separator Margin="0,8,0,8"/>
                    
                    <Button Content="Check Updates" Command="{Binding CheckForUpdatesCommand}" 
                            Style="{DynamicResource NavButtonStyle}" Margin="0,0,0,8"/>
                    
                    <TextBlock Text="{Binding UpdateMessage}" FontSize="11" TextWrapping="Wrap" 
                               Foreground="{DynamicResource SecondaryTextBrush}" Margin="0,8,0,0"/>
                </StackPanel>
            </Border>

            <!-- Content Area -->
            <Border Grid.Column="1" Background="{DynamicResource ContentBrush}">
                <ContentControl Content="{Binding CurrentView}" x:Name="ContentArea"/>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="{DynamicResource StatusBarBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,0,0">
            <Grid Margin="16,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="{Binding StatusMessage}" VerticalAlignment="Center" FontSize="12"
                               Foreground="{DynamicResource PrimaryTextBrush}"/>
                    <TextBlock Text=" | " VerticalAlignment="Center" Margin="8,0" FontSize="12"
                               Foreground="{DynamicResource SecondaryTextBrush}"/>
                    <TextBlock Text="{Binding CurrentGame.Name, StringFormat='Game: {0}'}" VerticalAlignment="Center" FontSize="12"
                               Foreground="{DynamicResource SecondaryTextBrush}"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Ellipse Width="6" Height="6" Fill="{DynamicResource SuccessBrush}" Margin="0,0,4,0" 
                             Visibility="{Binding HasError, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
                    <Ellipse Width="6" Height="6" Fill="{DynamicResource ErrorBrush}" Margin="0,0,4,0" 
                             Visibility="{Binding HasError, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <TextBlock Text="{Binding IsBusy, Converter={StaticResource BusyStatusConverter}}" FontSize="11"
                               VerticalAlignment="Center" Foreground="{DynamicResource SecondaryTextBrush}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
