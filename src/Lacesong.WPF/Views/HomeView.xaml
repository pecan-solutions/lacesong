<ui:UiPage x:Class="Lacesong.WPF.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.openxmlformats.org/expression/blend/2008" 
             xmlns:vm="clr-namespace:Lacesong.WPF.ViewModels"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance vm:MainViewModel}">

    <Grid Margin="42">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,32">
            <TextBlock Text="Welcome to Lacesong" Style="{StaticResource TitleTextBlockStyle}" Margin="0,0,0,8"/>
            <TextBlock Text="Your all-in-one mod manager for Silksong. Get started below." 
                       Style="{StaticResource SubtitleTextBlockStyle}"/>
        </StackPanel>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="24"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Quick Actions -->
            <ui:Card Grid.Column="0" Padding="24">
                <StackPanel>
                    <TextBlock Text="Quick Actions" Style="{StaticResource SectionHeaderTextBlockStyle}" Margin="0,0,0,20"/>
                    
                    <ui:Button Content="Install Mod from File" Command="{Binding InstallModFromFileCommand}" 
                               Appearance="Primary" Icon="DocumentAdd24" Margin="0,0,0,12"/>
                    
                    <ui:Button Content="Install Mod from URL" Command="{Binding InstallModFromUrlCommand}" 
                               Appearance="Secondary" Icon="Link24" Margin="0,0,0,12"/>
                    
                    <ui:Button Content="Browse Mod Catalog" Command="{Binding NavigateToViewCommand}" 
                               CommandParameter="ModCatalog" Appearance="Secondary" Icon="Apps24" Margin="0,0,0,16"/>
                    
                    <ui:CardSeparator Margin="0,8,0,16"/>
                    
                    <TextBlock Text="New to Modding?" Style="{StaticResource SmallHeaderTextBlockStyle}" Margin="0,0,0,8"/>
                    <TextBlock Style="{StaticResource BodyTextBlockStyle}" Margin="0,0,0,4">
                        <Run>1. Make sure your game is detected</Run>
                    </TextBlock>
                    <TextBlock Style="{StaticResource BodyTextBlockStyle}" Margin="0,0,0,4">
                        <Run>2. Install the mod loader if needed</Run>
                    </TextBlock>
                    <TextBlock Style="{StaticResource BodyTextBlockStyle}">
                        <Run>3. Install your favorite mods</Run>
                    </TextBlock>
                </StackPanel>
            </ui:Card>

            <!-- Game Status -->
            <ui:Card Grid.Column="2" Padding="24">
                <StackPanel>
                    <TextBlock Text="Game Status" Style="{StaticResource SectionHeaderTextBlockStyle}" Margin="0,0,0,20"/>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <ui:SymbolIcon Symbol="CheckmarkCircle24" FontSize="16"
                                       Foreground="{DynamicResource SuccessBrush}" 
                                       Visibility="{Binding IsGameDetected, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        <ui:SymbolIcon Symbol="Warning24" FontSize="16"
                                       Foreground="{DynamicResource WarningBrush}"
                                       Visibility="{Binding IsGameDetected, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
                        <TextBlock Text="{Binding IsGameDetected, Converter={StaticResource GameStatusConverter}}" 
                                   Style="{StaticResource BodyStrongTextBlockStyle}" Margin="8,0,0,0"/>
                    </StackPanel>
                    
                    <TextBlock Text="{Binding CurrentGame.Name, StringFormat='Game: {0}'}" 
                               Style="{StaticResource BodyTextBlockStyle}" Margin="0,0,0,8"/>
                    
                    <TextBlock Text="{Binding CurrentGame.InstallPath}"
                               Style="{StaticResource SmallFadedTextBlockStyle}"
                               TextWrapping="Wrap" Margin="0,0,0,16"/>
                    
                    <ui:Button Content="Detect Game" Command="{Binding DetectGameCommand}" 
                               Appearance="Secondary"
                               IsEnabled="{Binding IsGameDetected, Converter={StaticResource InverseBooleanConverter}}"
                               Margin="0,0,0,8"/>
                    
                    <ui:Button Content="Change Game" Command="{Binding SelectGameDirectoryCommand}" 
                               Appearance="Secondary"
                               IsEnabled="{Binding IsGameDetected}"/>
                </StackPanel>
            </ui:Card>
        </Grid>
    </Grid>
</ui:UiPage>
